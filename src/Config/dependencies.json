{
    "output_middleware": {
        "class": "TinyApp\\Model\\Middleware\\OutputMiddleware",
        "inject": [
            "@security_middleware",
            "1"
        ]
    },
    "security_middleware": {
        "class": "TinyApp\\Model\\Middleware\\SecurityMiddleware",
        "inject": [
            "@controller_middleware",
            "%security_list%",
            "@session_service"
        ]
    },
    "controller_middleware": {
        "class": "TinyApp\\Model\\Middleware\\ControllerMiddleware",
        "inject": [
            "%routed_controller%",
            "%routed_action%"
        ]
    },
    "session_service": {
        "class": "TinyApp\\Model\\Service\\SessionService"
    },
    "files_service": {
        "class": "TinyApp\\Model\\Service\\FilesService",
        "inject": [
            "@files_repository"
        ]
    },
    "files_repository" : {
        "class": "TinyApp\\Model\\Repository\\FilesRepository",
        "inject": [
            "@write_connection@"
        ]
    },
    "validator_factory": {
        "class": "TinyApp\\Model\\Validator\\ValidatorFactory",
        "inject": [
            "@session_service"
        ]
    },
    "items_controller": {
        "class": "TinyApp\\Controller\\ItemsController",
        "inject": [
            "@items_service",
            "@validator_factory",
            "@files_service"
        ]
    },
    "files_controller": {
        "class": "TinyApp\\Controller\\FilesController",
        "inject": [
            "@files_service",
            "@validator_factory"
        ]
    },
    "authentication_controller": {
        "class": "TinyApp\\Controller\\AuthenticationController",
        "inject": [
            "@session_service",
            "@validator_factory",
            "%in_memory_username%",
            "%in_memory_password_hash%"
        ]
    },
    "api_controller": {
            "class": "TinyApp\\Controller\\ApiController",
        "inject": [
            "@items_service@",
            "@validator_factory"
        ]
    },
    "items_service": {
        "class": "TinyApp\\Model\\Service\\ItemsService",
        "inject": [
            "@items_repository@"
        ]
    },
    "items_repository": {
        "class": "TinyApp\\Model\\Repository\\ItemsRepository",
        "inject": [
            "@write_connection@"
        ]
    },
    "write_connection": {
        "class": "TinyApp\\Model\\Repository\\DatabaseConnection",
        "inject": [
            "%database_engine%",
            "%database_host%",
            "%database_name%",
            "%database_user%",
            "%database_password%"
        ]
    }
}
